<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>常见问题 · PAG</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;/br&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="常见问题 · PAG"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pag.io/index.html"/><meta property="og:description" content="&lt;/br&gt;"/><meta property="og:image" content="https://pag.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pag.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://pagio-1251316161.cos.ap-nanjing.myqcloud.com/website/static/javascript/page.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://pagio-1251316161.file.myqcloud.com/website/static/javascript/pagjs/pag.min.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/new_official_website/logo.png" alt="PAG"/><h2 class="headerTitleWithLogo">PAG</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/" target="_self">首页</a></li><li class=""><a href="/docs/install.html" target="_self">设计师文档</a></li><li class=""><a href="/docs/sdk.html" target="_self">开发者文档</a></li><li class=""><a href="/case.html" target="_self">案例展示</a></li><li class=""><a href="/docs/faq.html" target="_self">FAQ</a></li><li class=""><a href="https://github.com/Tencent/libpag" target="_self">GitHub</a></li><li class=""><a href="https://qm.qq.com/cgi-bin/qm/qr?k=Wa65DTnEKo2hnPsvY-1EgJOF8tvKQ-ZT&amp;jump_from=webapi" target="_self">官方群</a></li><li class=""><a href="/#download" target="_self">免费下载</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">常见问题</h1></header><article><div><span><p></br>
</br></p>
<div id='faq' style='width: 720px; margin: 0 auto'>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-收费吗"></a><a href="#问pag-收费吗" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 收费吗？</h3>
</blockquote>
<p>PAG 已正式对外开源，采用 Apache 2.0 协议，可以商用，是不收费的。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-支持哪些平台"></a><a href="#问pag-支持哪些平台" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 支持哪些平台？</h3>
</blockquote>
<p>PAG 的渲染 SDK 目前已经支持 Android、iOS、macOS、Windows、Linux 和 Web 等平台。 桌面预览工具 PAGViewer 和 AE 导出插件同时支持 macOS 和 Windows 平台。目前在 Android、iOS 和 Web 平台上我们会定期发布预编译的制品库，具体接入参考：</p>
<ul>
<li><a href="/docs/sdk.html"><font color=blue>移动端接入SDK</font></a></li>
<li><a href="/docs/sdk-web.html"><font color=blue>Web端接入SDK</font></a></li>
</ul>
<p>其他平台由于没有统一的 UI 框架或者使用上本来也需要自己做一些渲染桥接的适配，我们没有发布统一的预编译制品库，可以自行从<a href="https://github.com/Tencent/libpag">Github</a> 的源码进行构建。对于小程序的适配也在进行中，预计还要过段时间。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-源码编译的时候报错了怎么处理"></a><a href="#问pag-源码编译的时候报错了怎么处理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 源码编译的时候报错了怎么处理？</h3>
</blockquote>
<p>PAG 项目的编译依赖一些第三方库的下载同步，以及正确版本的编译工具安装。在运行 Demo 前请务必先阅读位于根目录的 <a href="https://github.com/Tencent/libpag/blob/main/README.zh_CN.md">README.md</a>，根据 <strong>开发指南</strong> 一节的指引进行依赖同步和编译环境配置。如还有问题，可以在 QQ 群向我们反馈。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-支持模拟器吗在模拟器上测试性能是否准确"></a><a href="#问pag-支持模拟器吗在模拟器上测试性能是否准确" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 支持模拟器吗？在模拟器上测试性能是否准确？</h3>
</blockquote>
<p><strong>PAG 只保证 UI 动画在模拟器里的基本预览，不建议在模拟器上高强度使用或者进行性能测试</strong>。PAG 是一个全链路 GPU 加速的
渲染方案，在模拟器上由于无法开启 GPU 加速，性能会比实际情况差很多，另外模拟器也缺失部分必要的接口，导致一些配合高级视频编辑功能的接口在模拟器上也不支持。例如无法绘制到 CVPixelBuffer 离屏对象上。另外模拟器也不是真实用户场景，性能测试请使用真机进行。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问在-ios-上测试了一个-pag-动画播放为什么内存占用有-100-多-m-那么大"></a><a href="#问在-ios-上测试了一个-pag-动画播放为什么内存占用有-100-多-m-那么大" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：在 iOS 上测试了一个 PAG 动画播放，为什么内存占用有 100 多 M 那么大？</h3>
</blockquote>
<p>PAG 是纯 GPU 渲染的方案，任何一个 GPU 渲染的方案都会有一个初始的屏幕缓冲区开销，如果测试的时候是全屏的，每个像素都需要占用 4 字节的内存，加上双缓冲整体还要乘以 2，已经占用了几十 M 内存了。这个本身不是 PAG 动画占用的内存，而是任何 GPU 渲染方案的基本占用，但是它并不是线性增长的。PAG 提供了合并渲染的能力，你只需要创建一个 PAGView 就可以绘制无数个 PAG 动画文件上去，举个例子，共享 PAGView 的情况下，初始开销可能是几十 M，但是每增加一个 PAG 动画文件可能只增加几 M，所以不能通过一个全屏的 PAGView 测试单个 PAG 文件播放的内存占用来推理 N 个 PAG 动画的内存占用。要放到实际业务场景中进行测试才有意义。</p>
<p>实际业务场景通常是分这两种情况：</p>
<p>1.渲染的数量特别巨大，同屏可能有几十个上百个动画。这种场景下应该只创建一个 PAGView， 把 N 个动画文件合并渲染到同一个 PAGView 上，可以实现很少的内存占用就完美支持巨大数量的动画渲染。另外如果是在直播或者视频编辑里，本身已经创建过一个初始的 OpenGL 环境，还可以让 PAG 复用这个环境进行离屏渲染，也就不存在双缓冲的初始内存占用了。其实使用系统 UI 的 API 进行渲染没有额外双缓冲开销也是一样的原理，因为系统已经创建了一个全局默认的。</p>
<p>2.渲染的数量不多或者面积不大。这种场景下因为总面积不大，即使用了多个 PAGView，双缓冲中的额外内存占用其实也没有构成内存瓶颈，也就没有必要去做合并渲染的优化。直接正常使用 PAGView 即可。但是如果你本来就能够复用一个 PAGView 同时播放多个动画的，建议还是放在一起渲染，内存会进一步降低，性能也会更好。</p>
<p>总结一下：通过构造一个全屏的 PAGView 播放动画的测试 Demo，无法推理出实际的内存占用情况，建议按实际场景里出现的数量和动画最终使用面积来测试真实的内存占用。如果已经是按以上方式在真实场景下进行的内存测试，依然很高。那么问题可能出现在素材上。不同的素材本身内存占用也会有很大的区别。通常情况下过多使用 BMP 预合成会导致内存增量变高很多，因为涉及视频解码，会缓存非常多帧的内存。建议参考官网的<a href="https://pag.io/docs/optimization.html">素材优化指南</a>来进行针对性优化。如果问题还是无法解决，可以再通过 QQ 群联系我们围绕具体 case 分析解决。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-支持-flutter-使用吗"></a><a href="#问pag-支持-flutter-使用吗" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 支持 Flutter 使用吗？</h3>
</blockquote>
<p>PAG 支持 Flutter 使用，目前已经有成功使用的案例，需要业务层做些适配。具体原理是通过外部纹理做桥接，PAG 可以将动画逐帧绘制到指定的纹理上。因此，外部的任何框架包括 Flutter 只要能提供一个纹理给 PAG 绘制，都可以完美实现桥接或融合。具体请搜索 Flutter 外接纹理接口，提供一个纹理包装成 PAGSurface后，然后使用 PAGPlayer 正常进行绘制控制即可。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-与视频编辑的关系"></a><a href="#问pag-与视频编辑的关系" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 与视频编辑的关系？</h3>
</blockquote>
<p>PAG 诞生之初就是为了解决视频编辑场景下的复杂动画效果渲染需求，提供了相关接口可以便捷的与原生视频渲染链路相整合，但 PAG 本身并不是视频编辑框，它只负责动画的渲染的部分。视频编辑框架是另一个范畴的技术领域，需要业务方自己开发或者接入行业里成熟的方案，解决视频编解码，合成，导出等能力。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-文件为什么在移动端播放不出声音"></a><a href="#问pag-文件为什么在移动端播放不出声音" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 文件为什么在移动端播放不出声音？</h3>
</blockquote>
<p>PAG 文件支持集成音频数据，导出方法具体方法参照 <a href="https://pag.io/docs/pag-music-mark.html"><font color=blue>如何在AE中导出音频</font></a>。但 PAG SDK 仍然还是一个动画渲染库，目前只渲染画面的部分，播放或者合成到视频需要业务方使用音视频框架自行处理。研发侧可以从 PAGFile.audioBytes 接口上读取 PAG 内置的音频数据，将它存储为本地文件使用或者直接在内存中解码都可以。audioBytes 字节流的编码格式为 AAC，容器格式为 MPEG-4。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-windows-版本是否可以直接和-directx-11-的现有游戏结合"></a><a href="#问pag-windows-版本是否可以直接和-directx-11-的现有游戏结合" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG Windows 版本是否可以直接和 DirectX 11 的现有游戏结合？</h3>
</blockquote>
<p>目前没有计划要去直接支持 DX 的渲染后端，但是通过 Google 的 ANGLE 项目把 DX 包装成 OpenGL 让 PAG 进行渲染。目前 Chrome 在 Windows 上也是采用的这种实现方案。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pagviewer-里执行占位图替换或者文本编辑后怎么导出-pag-文件"></a><a href="#问pagviewer-里执行占位图替换或者文本编辑后怎么导出-pag-文件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAGViewer 里执行占位图替换或者文本编辑后，怎么导出 PAG 文件？</h3>
</blockquote>
<p>PAGViewer 并没有导出 PAG 文件的能力，只是一个预览工具。PAG 文件只能通过 AE 插件进行导出。这里可能是对 PAG 使用方式上的理解存在误区。PAG 提供的运行时编辑替换功能不是用来生成新的 PAG 文件的，编辑的产物应该是生成一个视频或直接播放动画。可以把 PAG 文件理解为一个动画模板，运行时可以替换为用户千变万化的个性信息，组合出无限的可能，如果每种可能都生成一个新的PAG 文件就失去了模板的意义了，这样导致用户使用的时候要下载无数个 PAG 文件。而正确的用法应该是始终只有一个 PAG 文件，但是可以播放或者渲染出无数的组合效果。</p>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问pag-导出插件是否支持-ae-表达式"></a><a href="#问pag-导出插件是否支持-ae-表达式" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：PAG 导出插件是否支持 AE 表达式？</h3>
</blockquote>
<p>AE 表达式还没有原生支持，因为涉及了 JS 虚拟机植入，包会很大，还在考虑最好的方案。但目前是可以导出包含表达式的动画内容的，可以参考如下两种方式导出：</p>
<ul>
<li>右键含有表达式的图层，使用快捷菜单可以把表达式转换为标准的关键帧，然后导出即可。</li>
<li>包含表达式效果的图层，如果不需要在运行时被编辑，也可以标记为 <a href="https://pag.io/docs/ae-bmp-guide.html">BMP 预合成</a> 后导出，这种方式不仅可以导出表达，包含 3D 属性甚至第三方插件的效果也可导出。</li>
</ul>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问导出-pag-时弹出了一个优化建议页面是什么意思"></a><a href="#问导出-pag-时弹出了一个优化建议页面是什么意思" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：导出 PAG 时弹出了一个优化建议页面，是什么意思？</h3>
</blockquote>
<p>提示页面包含两种信息，一种是性能优化建议，发现素材性能不理想时可以根据提示进行优化。另一种是显示当前不支持的能力，对于不支持的能力，可以转化为BMP预合成来导出，可以参考<a href="/docs/ae-bmp-guide.html"><font color=blue>BMP预合成导出</font></a>，可以在 <a href="/docs/ae-support.html"><font color=blue>AE特性列表</font></a> 查看支持直接被导出的 AE 特性列表。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问添加了很多特效effect但导出后不见了"></a><a href="#问添加了很多特效effect但导出后不见了" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：添加了很多特效（Effect），但导出后不见了？</h3>
</blockquote>
<p>可以在 <a href="/docs/ae-support.html"><font color=blue>AE特性列表</font></a> 里找到目前支持直接导出的特效。如果没有在这个列表里，但特效并不是用在运行时可编辑的图层上（不打算替换内容），或者这是第三方插件的特效，可以转化为BMP预合成来导出，可以参考 <a href="/docs/ae-bmp-guide.html"><font color=blue>BMP预合成导出</font></a>。如果你需要用在运行时可编辑的图层上，目前还不支持直接导出，可以通过 QQ 群或者 <a href="https://github.com/Tencent/libpag/discussions">Github</a> 给我们提个需求，我们会根据需求的通用程度排出优先级逐个提供支持。</p>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问标记为-bmp-预合成后本来不支持的效果就可以导出了但感觉清晰度不太够"></a><a href="#问标记为-bmp-预合成后本来不支持的效果就可以导出了但感觉清晰度不太够" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：标记为 BMP 预合成后，本来不支持的效果就可以导出了，但感觉清晰度不太够？</h3>
</blockquote>
<p>可以在对插件选项进行配置，请参考这个文档 <a href="/plugin-config.html"><font color=blue>插件选项配置面板</font></a>
与清晰度有关的参数是：</p>
<ul>
<li><code>通用</code>页面下的<code>图像压缩质量</code> 和 <code>位图像素密度</code></li>
<li><code>BMP预合成</code> 页面下的 <code>图像压缩质量</code></li>
</ul>
<p>但通常情况下并不需要修改这些默认参数，它们已经被设置在文件大小和清晰度的最佳平衡点上。通常情况下清晰度问题更多是由于额外的素材转换操作导致的。例如提前把一些效果转换成视频放进 AE 里再标记为 BMP 预合成导出，或者自行对图片资源进行压缩后放进 AE 使用。所有这些操作只会导致清晰度降低，并不会对最终导出的 PAG 文件带来任何的文件大小优化。PAG 导出插件已经内置了极高压缩率的算法，请不要额外做任何额外的优化文件大小操作，在 AE 中请一律使用最高清的资源进行动画设计，最终交给 PAG 导出插件来进行统一的压缩就行。
我们推荐如下最佳实践：</p>
<ul>
<li>能用矢量直接绘制的，比如图形或者文本，就不要使用 PS 转换为图片再导入 AE 使用。直接在 AE 里绘制。</li>
<li>如果必须从外部工具导入 AE 的资源，且原始资源本身就是矢量的，请尝试转换为 AE 原生的图层类型，否则 PAG 无法识别只能截图处理。</li>
<li>无法直接进行导出的 AE 特效，不要自行转成视频放进来再标记为 BMP 预合成导出，标记为 BMP 预合成本来就是帮你截图压缩成视频，两次视频压缩会导致清晰度降低。直接标记为 BMP 预合成让 PAG 导出原始的图层即可。</li>
<li>注意一下导出的分辨率是否足够。如果是矢量的内容，跟分辨率无关。如果导出的动画包含位图或者 BMP 预合成，清晰度跟根节点的总预合成的尺寸直接相关。在满足清晰度的情况下，尽可能选择合适的分辨率。</li>
</ul>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问导出的-pag-文件在客户端渲染时为什么会有色差"></a><a href="#问导出的-pag-文件在客户端渲染时为什么会有色差" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：导出的 PAG 文件在客户端渲染时为什么会有色差？</h3>
</blockquote>
<p>桌面预览工具 PAGViewer(2.1.40版本以上) 和客户端 SDK 使用的色彩空间都已经修正为 sRGB。目前解决色差最佳的方式还是 sRGB，
类似 P3 这种广色域的色彩空间并不是所有设备都能支持。如果 AE 设置的是其他色彩空间，请修改为 sRGB，否则导出的 PAG 文件在
渲染的时候可能会出现色差。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问导出的-pag-文件为什么播放卡顿不流畅如何优化素材性能"></a><a href="#问导出的-pag-文件为什么播放卡顿不流畅如何优化素材性能" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：导出的 PAG 文件为什么播放卡顿不流畅，如何优化素材性能？</h3>
</blockquote>
<p>PAG 同时支持纯矢量导出（包含图片图层）和 BMP 预合成导出。素材的性能问题通常都是因为过多使用了 BMP 预合成导致的，
针对 BMP 预合成的使用可以参考如下规则：</p>
<ul>
<li>尽量不用：通常只有在正常导出效果不正确时，才使用BMP预合成。可以参考 <a href="/docs/ae-support.html"><font color=blue>AE特性列表</font></a> 文档查看支持直接导出的 AE 特性。</li>
<li>尽量少用：如果有多个图层和预合成需要使用BMP预合成，尽量将它们合并，以减少BMP预合成的数目。</li>
<li>控制面积：尽可能避免巨大面积的预合成标记为 BMP 预合成导出，只拆解必要的动画区域出来标记为 BMP 预合成导出。</li>
</ul>
<p>通过以上方式已经能解决绝大部分的素材性能问题，其他更多的素材优化技巧可以参考 <a href="https://pag.io/docs/optimization.html">PAG 素材优化指南</a> 。
我们定期也会组织面向设计师的在线培训课程，分享素材制作的技巧和新的插件功能，如有需要请关注 QQ 群公告。</p>
<hr>
<blockquote>
<h3><a class="anchor" aria-hidden="true" id="问如何实现只播放某个-pag-文件的某个区间在-pagview-上没有找到接口"></a><a href="#问如何实现只播放某个-pag-文件的某个区间在-pagview-上没有找到接口" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问：如何实现只播放某个 PAG 文件的某个区间？在 PAGView 上没有找到接口。</h3>
</blockquote>
<p>快速的实现方式：首先通过 PAGComposition.Make() 方法创建一个空的 PAGComposition 容器，然后通过它的 addLayer 接口添加你想要播放的 PAGFile 对象。接着你可以对这个 PAGFile 调用 setStartTime 和 setDuration 来控制你想播放的具体区间。最后把这个总的 PAGComposition 交给 PAGView 去播放即可。这个功能大家可能直觉地会想到去 PAGView 或 PAGPlayer 这些播放控制类上找，但其实应该通过操作 PAGFile 来实现任何定制化的播放诉求。 PAG 提供了非常灵活的图层级别控制 API，运行时可以自由排列组合多个 PAGFile，通过 setStartTime 和 setDuration 控制时间轴，通过 setMatrix 控制相对位置，也可以对图层进行增删改等等。具体可以参考 PAGLayer 以及 PAGComposition 等类的相关接口。通过图层级别的控制 API，你也可以设计一系列复杂的原子特效组合特性，在制作 PAG 素材时就不在需要把各种排列组合的场景都逐一在 AE 拼装导出一遍，而是只要导出拆分的原子 PAG 文件，然后运行时通过编程控制可以组合出无限种类的效果。</p>
<hr>
</div></span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2022 pag.io</section></footer></div></body></html>